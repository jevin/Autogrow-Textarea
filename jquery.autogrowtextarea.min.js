(function($){$.fn.autoGrow=function(){return this.each(function(){var txtArea=$(this);var fakeDiv=$('<div class="autogrow-textarea-mirror"></div>');txtArea.after(fakeDiv);var reloadText=function(){txtArea=$(this);var maxHeight=parseInt(txtArea.css("max-height"),10);fakeDiv=txtArea.next(".autogrow-textarea-mirror");fakeDiv.html(txtArea.val().replace(/\n/g,"<br/>"));if(isNaN(maxHeight)){txtArea.height(fakeDiv.height())}else if(fakeDiv.height()<=maxHeight){txtArea.height(fakeDiv.height())}else{txtArea.height(maxHeight);txtArea.css({overflow:"visible"})}};fakeDiv.css({overflow:"visible",display:"none","word-wrap":"break-word",padding:txtArea.css("padding"),width:txtArea.css("width"),"font-family":txtArea.css("font-family"),"font-size":txtArea.css("font-size"),"line-height":txtArea.css("line-height")});txtArea.css({overflow:"hidden"});txtArea.css({"min-height":this.rows+"em"});txtArea.keyup(reloadText)})}})(jQuery);